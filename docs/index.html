<!DOCTYPE html>
<html>
<head> <meta charset="utf8">
    <title>
        test
    </title>
</head>
<body>
    <img src="https://github.com/9am/sample_app/releases/download/test/test.png">
    <img src="./nail.png">
    <script>
        const loadImage = (url = '') => {
            return new Promise((resolve, reject) => {
                let img = new Image();
                img.crossOrigin = 'anonymous';
                img.onload = () => {
                    try {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        canvas.width = img.width;
                        canvas.height = img.height;
                        ctx.drawImage(img, 0, 0);
                        resolve(ctx.getImageData(0, 0, img.width, img.height));
                    } catch (error) {
                        reject(error);
                    }
                };
                img.onerror = error => reject(error);
                img.src = url;
            });
        }

        (async () => {
            try {
                const data = await fetch('https://api.github.com/repos/9am/sample_app/issues?filter=created').then(res => res.json());
                console.log('success', data);

                const output = await loadImage('https://github.com/9am/sample_app/releases/download/test/test.png');
                console.log('ok', output);
            } catch (err) {
                console.log('fail', err);
            }

            try {
                const output1 = await loadImage('https://user-images.githubusercontent.com/1435457/149445506-553d944b-d0f2-469d-913f-2649199aab1b.jpeg');
                console.log('ok1', output1);
            } catch (err) {
                console.log('fail1', err);
            }
        })();

    </script>
</body>
</html>
